[tool:pytest]
# Minimum version required
minversion = 7.0

# Test discovery
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*
testpaths = tests

# Output options
addopts = 
    -ra
    -q
    --strict-markers
    --strict-config
    --tb=short
    --durations=10
    --color=yes

# Markers
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    integration: marks tests as integration tests
    unit: marks tests as unit tests
    auth: tests that require authentication
    notion: tests that interact with Notion API
    taskwarrior: tests that interact with Taskwarrior
    sync: tests related to synchronization
    config: tests related to configuration
    cli: tests for CLI commands
    hooks: tests for hook functionality

# Warning filters
filterwarnings =
    error
    ignore::UserWarning
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::ImportWarning
    ignore:.*pkg_resources.*:DeprecationWarning

# Test output
junit_family = xunit2
junit_logging = system-out

# Coverage options (if using pytest-cov)
# addopts = --cov=not_warrior --cov-report=html --cov-report=term-missing

# Timeout for tests (if using pytest-timeout)
# timeout = 300

# Parallel execution (if using pytest-xdist)
# addopts = -n auto

# Environment variables for testing
env =
    NOT_WARRIOR_TEST = 1
    NOT_WARRIOR_LOG_LEVEL = WARNING

# Test collection ignore patterns
norecursedirs = 
    .git
    .tox
    .venv
    venv
    build
    dist
    *.egg
    __pycache__
    .pytest_cache
    .mypy_cache

# Ignore specific files/directories
ignore =
    setup.py
    conftest.py
    migrations/
    .vscode/
    .idea/